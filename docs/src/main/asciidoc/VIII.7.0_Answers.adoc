
=== VIII.7 Answering QUESTIONs

[cols="<1,<5"]
|===
|*REQUIREMENT*
|The ESPD Response must include one criterion response (one answer), and only one, linked to one, and only one, criterion property (one QUESTION) copied from the ESPD Request into the ESPD Response document; and to each criterion property added by the economic operator to the ESDP Response. 

One criterion response, though, may contain a list of response values of the *same type*. 
|===

[cols="<1,<5"]
|===
|*REQUIREMENT*
|If the response to a criterion property is marked as *confidential* the evidences linked to this criterion property must also be treated as confidential.
|===

The section *Data Structures* established a mapping between each data structure elements 'label' and the corresponding UBL-2.2 XML element of the `cac:TenderingCriterion` component. Thus:

* REQUIREMENT_GROUP and QUESTION_GROUP are mapped to `cac:TenderingCriterionPropertyGroup`;

* REQUIREMENT_SUBGROUP and QUESTION_SUBGROUP are mapped to `cac:SubsidiaryTenderingCriterionPropertyGroup`; and

* REQUIREMENT and QUESTION are mapped to `cac:TenderingCriterionProperty`.

If you have a look at the data structure tables (the fragments of spread-sheets in previous chapters), you will observe that all groups and subgroups have a UUID associated. These UUID are generated by e-Certis and identify the structure inside the group or subgroup.

In the same data structures *REQUIREMENT*(s) and *QUESTION*(s) do not have a UUID assigned. This is because the UUID for each `cac:TenderingCriterionProperty` element has to be generated dynamically: each criterion property needs a unique identifier. The reasons are:

. In the UBL-2.2 model the answers are separated from inside the criterion. This differs from the previous models of the ESPD-EDM. The motivation for this separation was to allow drafting *QualificationApplicationResponse* documents without having to copy every criterion from the *QualificationApplicationRequest*, having in mind other scenarios different to the *European* Single Procurement Document. This could be used, perhaps, by public administrations that would like to use the UBL-2.2 XSDs for "under-the-threshold contract" ESPDs. Even in that situation the *QualificationApplicationResponse* would need to refer to the specific *QualificationApplicationRequest* instance (so the UUIDs are exactly the ones that were automatically generated for that instance). Remember that this is not possible in the ESPD-EDM, as there is a specific requirement asking to *copy* every criterion from the QualificationApplicationRequest into the QualificationApplicationResponse; see this link:#viii-the-espd-response-document[business requirement] at the beginning of the section.

. If the UUID of `cac:TenderingCriterionProperty` was 'fixed' (as are the groups and subgroups) one answer could refer to more than one REQUIREMENT or QUESTION; and this is not permissible (see business requirement above, one criterion property -> one answer, one answer -> one criterion property).

==== Differences between the Regulated and Self-contained versions
 
There are no differences between the *REGULATED* and *SELF-CONTAINED* versions as far as the answers to the QUESTION(s) are concerned.

==== XSD Schema (REGULATED and SELF-CONTAINED)

To answer a QUESTION the ESPD-EDM V2.1.1 uses the UBL-2.2 component `cac:TenderingCriterionResponse`. The expected elements are highlighted in blue in the figure below:

.cac:TenderingCriterionResponse XSD element
image::TenderingCriterionResponse_XSD.png[cac:TenderingCriterionResponse element, alt="cac:TenderingCriterionResponse element", align="center"]

To answer one QUESTION one of the different possible types of values from the `cac:ResponseValue` element (inside the `cac:TenderingCriterionResponse`) must be selected. In other words, the types of elements inside the `cac:ResponseValue` are all *disjoint* amongst themselves. 

If the need is to build a list of values, e.g. the list of Common Procurement Vocabulary codes (CPV) corresponding to an activity, or a the list of Lot identifiers the EO tenders to, a sequence of `cac:ResponseValues` shall be instantiated. See XML examples below. 
 
.cac:ResponseValue XSD element
image::ResponseValue_XSD.png[cac:ResponseValue XSD element, alt="cac:ResponseValue XSD element", align="center"]

The `cac:ApplicablePeriod` is used to hold the start date and the end-date provided by the economic operator to a QUESTION for which the expected data is of type 'PERIOD'. (See expected types in the Code List link:https://github.com/ESPD/ESPD-EDM/tree/2.1.1/docs/src/main/asciidoc/dist/cl/ods/ESPD-CodeLists-V2.1.1.ods[ResponseDataType]).

.Note for the future
[IMPORTANT]
====
Future versions of UBL could consider moving this element inside the element `cac:ResponseValue` and rename it appropriately (or come up with a design approach different to the current one).
====

.cac:ApplicablePeriod XSD element
image::Period_XSD.png[cac:ApplicablePeriod XSD element, alt="cac:ApplicablePeriod XSD element", align="center"]

One answer to one QUESTION may be linked to multiple evidences. The XSD diagram below shows that to make this link possible the element `cac:TenderingCriterionResponse` element associates a class `cac:EvidenceSupplied`. This class contains only one basic information element, a `cbc:ID`. In UBL, except for `cbc:Description`, basic information elements (typically prefixed as `cbc:`) cannot be of multiple cardinality, but associated classes can. Thus the need to place the `cbc:ID` inside a class. This ID points at an instance of `cac:Evidence` present in the XML. 

This design is an interesting feature as, by separating the evidence object instances from inside the response, *one evidence may be used for different criteria*. See the component `cac:Evidence` below in the section "link:#ix-evidences[IX. Evidences]". See also XML examples.
 
.cac:EvidenceSupplied XSD element
image::Evidence_Supplied_XSD.png[cac:EvidenceSupplied XSD element, alt="cac:EvidenceSupplied XSD element", align="center"]


==== Mock-ups and data structures

The answers to QUESTION(s) are provided in the example mock-ups of the previous sections about how the contracting authority specify REQUIREMENT(s) and QUESTION(s), and how the economic operator adds or removes instances of elements (such as data on the economic operator, references to similar works and services, etc. Please refer to those mock-ups and compare the values shown in the fields reserved for the EO to answer and compare those values with the ones in the example XML snippets below.

Responses are not associated to ESPD custom data structures. All the values regarding an answer are always placed in one instance of the UBL-2.2 data element `cac:TenderingCriterionResponse`.

 


  

